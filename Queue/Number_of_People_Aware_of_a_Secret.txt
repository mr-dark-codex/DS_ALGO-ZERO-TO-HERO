import java.util.LinkedList;
import java.util.Queue;

class Person {
    int person;
    int day;
    int delay;
    int forgot;

    Person(int person, int day, int delay, int forgot) {
        this.person = person;
        this.day = day;
        this.delay = delay;
        this.forgot = forgot;
    }

    @Override
    public String toString() {
        return "Person = " + person + " day = " + day + " delay = " + delay + " forgot = " + forgot;
    }
}

public class Number_of_People_Aware_of_a_Secret {

    public int peopleAwareOfSecret(int n, int delay, int forget) {
        Queue<Person> queue = new LinkedList<>();
        int result = 1;
        int globalPerson = 0;
        int dayLevel = 1;

        queue.offer(new Person(globalPerson, 1, delay, forget));

        // while (!queue.isEmpty() && n >= 0) {
        // Person currPerson = queue.poll();

        // System.out.println(currPerson.toString());

        // // Person can tell the secret if delay == 0 and hasn't forgotten
        // if (currPerson.delay == 0 && currPerson.forgot > 0) {
        // globalPerson++;
        // result++;
        // queue.offer(new Person(globalPerson, currPerson.day + 1, delay, forget));
        // }

        // // Person stays alive until forget expires
        // if (currPerson.forgot > 1) {
        // queue.offer(new Person(currPerson.person, currPerson.day + 1, Math.max(0,
        // currPerson.delay - 1), currPerson.forgot - 1));
        // }else {
        // result--;
        // }

        // n--;
        // }

        while (!queue.isEmpty() && n > 0) {
            System.out.println("-----------Day = " + (dayLevel) + "-----------------------");
            System.out.println("queue = " + queue.size());

            LinkedList<Person> temp = new LinkedList<>();
            int size = queue.size();
            for (int i = 0; i < size; i++) {

                Person currPerson = queue.poll();

                // Current Day
                int currDay = currPerson.day;
                int currPersonDelay = currPerson.delay;
                int currPersonForgot = currPerson.forgot;

                System.out.println(currPerson.toString());

                if (currPersonDelay == 0 && currPersonForgot > 0) {
                    result++;

                    // Add New
                    Person newPerson = new Person(++globalPerson, currDay, delay, forget);
                    System.out.println("New Add person = " + newPerson.toString());

                    newPerson.day += 1;
                    newPerson.delay = Math.max(0, newPerson.delay - 1);
                    newPerson.forgot = Math.max(0, newPerson.forgot - 1);
                    // queue.offer(newPerson); // added for furthur process
                    temp.add(newPerson);
                }

                if (currPersonForgot == 0) {
                    // Person forgets - remove from count
                    result--;
                } else {
                    // re-insert the currPerson for next day
                    currPerson.day += 1;
                    currPerson.delay = Math.max(0, currPersonDelay - 1);
                    currPerson.forgot = Math.max(0, currPersonForgot - 1);

                    // queue.offer(currPerson);
                    temp.add(currPerson);
                    System.out.println("Re-inserted: " + currPerson);
                }

                System.out.println("Current Persons Know Secret: " + result);
                System.out.println("Rest Person in Queue : " + queue.toString());

            }

            // quequed to for adding
            System.out.println("\n Queued : ");
            for (Person person : temp) {
                System.out.println(person);
            }

            // Re Inserted it to Queue
            queue.addAll(temp);

            System.out.println("\n\n End of the Day Queued Person : \n");
            for (Person person : queue) {
                System.out.println(person);
            }

            n--;
            dayLevel++;
            // System.out.println("----------------------------------");

        }

        return result;
    }

    public int peopleAwareOfSecret2(int n, int delay, int forget) {
        Queue<Person> queue = new LinkedList<>();
        int secret = 1;
        
    }

    public static void main(String[] args) {
        // int n = 6;
        // int delay = 2;
        // int forget = 4;

        int n = 4;
        int delay = 1;
        int forget = 3;

        System.out
                .println("OUTPUT : " + new Number_of_People_Aware_of_a_Secret().peopleAwareOfSecret(n, delay, forget));
    }
}
